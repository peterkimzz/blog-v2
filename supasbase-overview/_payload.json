[{"data":1,"prerenderedAt":571},["Reactive",2],{"content-query-6jz7JVdKWA":3},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":5,"_empty":6,"title":7,"description":8,"excerpt":9,"category":43,"thumbnail":44,"updated":45,"created":45,"published":46,"body":47,"_type":566,"_id":567,"_source":568,"_file":569,"_extension":570},"/supasbase-overview","",false,"Firebase를 대체할 오픈소스 프로젝트, Supabase","Supabase는 구글 Firebase를 엔터프라이즈 레벨에서도 사용 가능하도록 만든 오픈소스 프로젝트이다. 현재는 베타 서비스이다.",{"type":10,"children":11},"root",[12,33,38],{"type":13,"tag":14,"props":15,"children":16},"element","p",{},[17,31],{"type":13,"tag":18,"props":19,"children":23},"a",{"href":20,"rel":21},"https://supabase.io/",[22],"nofollow",[24],{"type":13,"tag":25,"props":26,"children":27},"code-inline",{},[28],{"type":29,"value":30},"text","Supabase",{"type":29,"value":32},"는 구글 Firebase를 엔터프라이즈 레벨에서도 사용 가능하도록 만든 오픈소스 프로젝트이다. 현재는 베타 서비스이다.",{"type":13,"tag":14,"props":34,"children":35},{},[36],{"type":29,"value":37},"컴퓨터에 직접 설치하는 방식은 아니고, Firebase처럼 클라우드로 제공되는 서비스이다.",{"type":13,"tag":14,"props":39,"children":40},{},[41],{"type":29,"value":42},"내가 Firebase를 사용하면서 아쉬웠던 건, 데이터가 많아졌을 때 인덱싱을 쉽게 적용시켜서 빠르게 레코드를 읽어오는 기능이 강력하진 않아서 데이터가 많은 앱에서는 사용하기 힘들다는 점이다.","tech","https://media.vlpt.us/images/peterkimzz/post/b2873856-20b6-49a4-a8f4-176a94c92d23/08f3d41684b91f7d68810459b2356ecb4819c382.png","2020-12-15T00:00:00.000Z",true,{"type":10,"children":48,"toc":550},[49,61,65,69,76,81,90,95,100,108,113,118,125,131,138,143,150,155,160,166,171,188,194,210,215,220,234,243,255,263,275,283,295,300,305,311,316,321,333,339,350,358,363,375,383,395,400,412,420,432,437,444,449,454,460,465,472,480,485,490,503,508,513,518,523,528],{"type":13,"tag":14,"props":50,"children":51},{},[52,60],{"type":13,"tag":18,"props":53,"children":55},{"href":20,"rel":54},[22],[56],{"type":13,"tag":25,"props":57,"children":58},{},[59],{"type":29,"value":30},{"type":29,"value":32},{"type":13,"tag":14,"props":62,"children":63},{},[64],{"type":29,"value":37},{"type":13,"tag":14,"props":66,"children":67},{},[68],{"type":29,"value":42},{"type":13,"tag":70,"props":71,"children":73},"h2",{"id":72},"supabase",[74],{"type":29,"value":75},"Supabase?",{"type":13,"tag":14,"props":77,"children":78},{},[79],{"type":29,"value":80},"Supabase 팀은 이 프로젝트를 이렇게 소개한다.",{"type":13,"tag":82,"props":83,"children":84},"blockquote",{},[85],{"type":13,"tag":14,"props":86,"children":87},{},[88],{"type":29,"value":89},"Create a backend in less than 2 minutes. Start your project with a Postgres Database, Authentication, instant APIs, and realtime subscriptions.",{"type":13,"tag":14,"props":91,"children":92},{},[93],{"type":29,"value":94},"2분 안에 Postgres, 인증과 API, 실시간 구독을 구현할 수 있다는 얘기이다. 사실이라면 엄청나게 편리할 것 같다.",{"type":13,"tag":14,"props":96,"children":97},{},[98],{"type":29,"value":99},"현재 회원가입은 Github OAuth로만 가능하고, 올해 12월까지 가입하는 유저들은 자동으로 2년 가량의 Base Tier 크레딧을 받을 수 있다.",{"type":13,"tag":14,"props":101,"children":102},{},[103],{"type":13,"tag":104,"props":105,"children":107},"img",{"alt":5,"src":106},"https://images.velog.io/images/peterkimzz/post/8723a9c7-db0f-4385-9575-ebbef1b79a4d/image.png",[],{"type":13,"tag":14,"props":109,"children":110},{},[111],{"type":29,"value":112},"가입하고 Organization과 Database를 만들고 프로비저닝이 완료될 때 까지 기다리면 이런 대시보드가 나온다.",{"type":13,"tag":14,"props":114,"children":115},{},[116],{"type":29,"value":117},"데이터베이스에 대한 정보도 볼 수 있는데, 비밀번호를 제외하고 전부 자동으로 설정되고, 변경도 되지 않는다. 베타 버전이라 그런 것 같은데, 오히려 이름 짓느라 고민하지 않아도 되서 개인적으로는 좋았다.",{"type":13,"tag":14,"props":119,"children":120},{},[121],{"type":13,"tag":104,"props":122,"children":124},{"alt":5,"src":123},"https://images.velog.io/images/peterkimzz/post/9fe72d58-cbde-4966-a1ba-632196d5cfaa/image.png",[],{"type":13,"tag":70,"props":126,"children":128},{"id":127},"table-생성",[129],{"type":29,"value":130},"Table 생성",{"type":13,"tag":14,"props":132,"children":133},{},[134],{"type":13,"tag":104,"props":135,"children":137},{"alt":5,"src":136},"https://images.velog.io/images/peterkimzz/post/e062a75b-6dae-4b66-a556-12511cf2bf71/image.png",[],{"type":13,"tag":14,"props":139,"children":140},{},[141],{"type":29,"value":142},"테이블명과 PK를 설정하는 부분인데, PK는 4가지 타입으로 제공된다. 나는 uuid로 선택했다.",{"type":13,"tag":14,"props":144,"children":145},{},[146],{"type":13,"tag":104,"props":147,"children":149},{"alt":5,"src":148},"https://images.velog.io/images/peterkimzz/post/10b41a97-4401-4666-b20d-2344cd0eba37/image.png",[],{"type":13,"tag":14,"props":151,"children":152},{},[153],{"type":29,"value":154},"테이블과 PK를 설정하면 칼럼도 추가할 수 있는데 UI가 상당히 직관적이다.",{"type":13,"tag":14,"props":156,"children":157},{},[158],{"type":29,"value":159},"아직은 베타 버전이라 현재는 웹사이트를 통해서만 Database, Table을 만들 수 있다.",{"type":13,"tag":70,"props":161,"children":163},{"id":162},"api",[164],{"type":29,"value":165},"API",{"type":13,"tag":14,"props":167,"children":168},{},[169],{"type":29,"value":170},"사실 데이터베이스는 서버쪽에서 데이터베이스 설정이나 스키마, 레코드 Read/Write를 코드로 관리하기 편해야한다. ORM을 사용하는 이유이기도 하다.",{"type":13,"tag":14,"props":172,"children":173},{},[174,176,186],{"type":29,"value":175},"클라이언트측 라이브러리는 현재 자바스크립트만 제공된다. 패키지 이름은 ",{"type":13,"tag":18,"props":177,"children":180},{"href":178,"rel":179},"https://www.npmjs.com/package/@supabase/supabase-js",[22],[181],{"type":13,"tag":25,"props":182,"children":183},{},[184],{"type":29,"value":185},"@supabase/supabase-js",{"type":29,"value":187},"이고, 사용해보니 타입스크립트도 지원된다.",{"type":13,"tag":189,"props":190,"children":192},"h3",{"id":191},"설치",[193],{"type":29,"value":191},{"type":13,"tag":195,"props":196,"children":201},"code",{"className":197,"code":199,"language":200,"meta":5},[198],"language-bash","$ yarn add @supabase/supabase-js\n# npm i @supabase/supabase-js\n","bash",[202],{"type":13,"tag":203,"props":204,"children":205},"pre",{},[206],{"type":13,"tag":195,"props":207,"children":208},{"__ignoreMap":5},[209],{"type":29,"value":199},{"type":13,"tag":189,"props":211,"children":213},{"id":212},"사용법",[214],{"type":29,"value":212},{"type":13,"tag":14,"props":216,"children":217},{},[218],{"type":29,"value":219},"npm으로 제공하는 라이브러리를 이용해 간단하게 인스턴스를 구현 가능하다.",{"type":13,"tag":195,"props":221,"children":226},{"className":222,"code":224,"language":225,"meta":5},[223],"language-ts","import { createClient } from '@supabase/supabase-js'\n\nconst supabaseUrl = 'https://siwwiuleewkpfbschahw.supabase.co'\nconst supabaseKey = process.env.SUPABASE_KEY as string\nconst supabase = createClient(supabaseUrl, supabaseKey)\n","ts",[227],{"type":13,"tag":203,"props":228,"children":229},{},[230],{"type":13,"tag":195,"props":231,"children":232},{"__ignoreMap":5},[233],{"type":29,"value":224},{"type":13,"tag":14,"props":235,"children":236},{},[237],{"type":13,"tag":238,"props":239,"children":240},"strong",{},[241],{"type":29,"value":242},"레코드 쓰기",{"type":13,"tag":195,"props":244,"children":247},{"className":245,"code":246,"language":225,"meta":5},[223],"await supabase\n  .from('User')\n  .insert([{ some_column: 'someValue', other_column: 'otherValue' }])\n",[248],{"type":13,"tag":203,"props":249,"children":250},{},[251],{"type":13,"tag":195,"props":252,"children":253},{"__ignoreMap":5},[254],{"type":29,"value":246},{"type":13,"tag":14,"props":256,"children":257},{},[258],{"type":13,"tag":238,"props":259,"children":260},{},[261],{"type":29,"value":262},"레코드 읽기",{"type":13,"tag":195,"props":264,"children":267},{"className":265,"code":266,"language":225,"meta":5},[223],"let { data: User, error } = await supabase.from('User').select('*')\n\nlet { data: User, error } = await supabase\n  .from('User')\n  .select('some_column, other_column')\n  .range(0, 9)\n\nlet { data: User, error } = await supabase.from('User').select(`\n    some_column,\n    other_table (\n      foreign_key\n    )\n  `)\n",[268],{"type":13,"tag":203,"props":269,"children":270},{},[271],{"type":13,"tag":195,"props":272,"children":273},{"__ignoreMap":5},[274],{"type":29,"value":266},{"type":13,"tag":14,"props":276,"children":277},{},[278],{"type":13,"tag":238,"props":279,"children":280},{},[281],{"type":29,"value":282},"이벤트 훅",{"type":13,"tag":195,"props":284,"children":287},{"className":285,"code":286,"language":225,"meta":5},[223],"// insert\nconst User = supabase\n  .from('User')\n  .on('INSERT', payload => {\n    console.log('Change received!', payload)\n  })\n  .subscribe()\n\n// specific row\nconst User = supabase\n  .from('User')\n  .eq('column_name', 'someValue')\n  .on('*', payload => {\n    console.log('Change received!', payload)\n  })\n  .subscribe()\n",[288],{"type":13,"tag":203,"props":289,"children":290},{},[291],{"type":13,"tag":195,"props":292,"children":293},{"__ignoreMap":5},[294],{"type":29,"value":286},{"type":13,"tag":14,"props":296,"children":297},{},[298],{"type":29,"value":299},"기존 ORM에 익숙하다면 별 다른 문서없이 바로 이해가 될 정도로 직관적이다.",{"type":13,"tag":14,"props":301,"children":302},{},[303],{"type":29,"value":304},"읽기 쓰기 이외에도 필터링, 수정 삭제 등 필수적으로 제공되야 할 기능들이 제공된다.",{"type":13,"tag":70,"props":306,"children":308},{"id":307},"graphql-vs-supabase",[309],{"type":29,"value":310},"GraphQL vs Supabase",{"type":13,"tag":14,"props":312,"children":313},{},[314],{"type":29,"value":315},"GraphQL에 익숙한 사람들을 위해 gql과 비슷하게 사용할 수 있는 인터페이스도 제공된다.",{"type":13,"tag":14,"props":317,"children":318},{},[319],{"type":29,"value":320},"현재는 GraphQL만큼 강력하진 않겠지만, 그에 준하는 기능들을 가지게 된다면 엄청난 장점이 될 것 같다.",{"type":13,"tag":195,"props":322,"children":325},{"className":323,"code":324,"language":225,"meta":5},[223],"// graphql\nconst { loading, error, data } = useQuery(gql`\n  query GetDogs {\n    dogs {\n      id\n      breed\n      owner {\n        id\n        name\n      }\n    }\n  }\n`)\n\n// supabase\nconst { data, error } = await supabase.from('dogs').select(`\n      id, breed,\n      owner (id, name)\n  `)\n",[326],{"type":13,"tag":203,"props":327,"children":328},{},[329],{"type":13,"tag":195,"props":330,"children":331},{"__ignoreMap":5},[332],{"type":29,"value":324},{"type":13,"tag":70,"props":334,"children":336},{"id":335},"회원-관리",[337],{"type":29,"value":338},"회원 관리",{"type":13,"tag":14,"props":340,"children":341},{},[342,344,348],{"type":29,"value":343},"Firebase나 Supabase같은 툴들이 가진 가장 큰 장점 중 하나는 이 ",{"type":13,"tag":25,"props":345,"children":346},{},[347],{"type":29,"value":338},{"type":29,"value":349}," 기능이다.",{"type":13,"tag":14,"props":351,"children":352},{},[353],{"type":13,"tag":238,"props":354,"children":355},{},[356],{"type":29,"value":357},"회원 가입",{"type":13,"tag":14,"props":359,"children":360},{},[361],{"type":29,"value":362},"코드 3줄이면 비밀번호 암호화 알고리즘을 구현할 필요없이 회원을 가입시킬 수 있다.",{"type":13,"tag":195,"props":364,"children":367},{"className":365,"code":366,"language":225,"meta":5},[223],"let { user, error } = await supabase.auth.signUp({\n  email: 'someone@email.com',\n  password: 'nshOpnIDkwgnouwsVLnk'\n})\n",[368],{"type":13,"tag":203,"props":369,"children":370},{},[371],{"type":13,"tag":195,"props":372,"children":373},{"__ignoreMap":5},[374],{"type":29,"value":366},{"type":13,"tag":14,"props":376,"children":377},{},[378],{"type":13,"tag":238,"props":379,"children":380},{},[381],{"type":29,"value":382},"로그인",{"type":13,"tag":14,"props":384,"children":385},{},[386,388,393],{"type":29,"value":387},"Supabase는 유저가 회원가입하면 고유한 id를 만들고, 서버가 켜져 있는 동안 어디서든 ",{"type":13,"tag":25,"props":389,"children":390},{},[391],{"type":29,"value":392},"supabase.auth.user()",{"type":29,"value":394}," 를 호출하는 것으로 유저 정보를 가져올 수 있다.",{"type":13,"tag":14,"props":396,"children":397},{},[398],{"type":29,"value":399},"물론 이 id를 다른 테이블에서 FK로 넣어줄 수 있다.",{"type":13,"tag":195,"props":401,"children":404},{"className":402,"code":403,"language":225,"meta":5},[223],"let { user, error } = await supabase.auth.signIn({\n  email: 'someone@email.com'\n})\n\n// OAuth\nlet { user, error } = await supabase.auth.signIn({\n  provider: 'github'\n})\n",[405],{"type":13,"tag":203,"props":406,"children":407},{},[408],{"type":13,"tag":195,"props":409,"children":410},{"__ignoreMap":5},[411],{"type":29,"value":403},{"type":13,"tag":14,"props":413,"children":414},{},[415],{"type":13,"tag":238,"props":416,"children":417},{},[418],{"type":29,"value":419},"기타 편의 기능",{"type":13,"tag":195,"props":421,"children":424},{"className":422,"code":423,"language":225,"meta":5},[223],"// 비밀번호 재설정 이메일 보내기\nlet { data, error } = await supabase.auth.api.resetPasswordForEmail(email)\n\n// 현재 세션에 저장된 유저 정보 가져오기\nconst user = supabase.auth.user()\n\n// 초대 메일 보내기\nlet { user, error } = await supabase.auth.api.inviteUserByEmail(\n  email: 'someone@email.com'\n)\n",[425],{"type":13,"tag":203,"props":426,"children":427},{},[428],{"type":13,"tag":195,"props":429,"children":430},{"__ignoreMap":5},[431],{"type":29,"value":423},{"type":13,"tag":14,"props":433,"children":434},{},[435],{"type":29,"value":436},"초대 메일을 보내는 기능을 써봤더니, 아래처럼 메일이 도착했다.",{"type":13,"tag":14,"props":438,"children":439},{},[440],{"type":13,"tag":104,"props":441,"children":443},{"alt":5,"src":442},"https://images.velog.io/images/peterkimzz/post/5062b7ad-3a72-4ce6-8f0f-bf279419de4c/image.png",[],{"type":13,"tag":14,"props":445,"children":446},{},[447],{"type":29,"value":448},"저 localhost로 보이는 부분은 웹 대시보드에서 변경 가능하다.",{"type":13,"tag":14,"props":450,"children":451},{},[452],{"type":29,"value":453},"추가로 Firebase와 동일하게 회원 관리를 위한 이메일 템플릿은 웹 대시보드에서 수정이 가능하다.",{"type":13,"tag":70,"props":455,"children":457},{"id":456},"sql",[458],{"type":29,"value":459},"SQL",{"type":13,"tag":14,"props":461,"children":462},{},[463],{"type":29,"value":464},"내부적으로 PostgreSQL을 사용하기 때문에, 이렇게 웹 브라우저에서 SQL을 실행시키는 인터페이스도 제공된다.",{"type":13,"tag":14,"props":466,"children":467},{},[468],{"type":13,"tag":104,"props":469,"children":471},{"alt":5,"src":470},"https://images.velog.io/images/peterkimzz/post/4741f89f-921f-4d89-b76b-5ef16d9a2836/image.png",[],{"type":13,"tag":14,"props":473,"children":474},{},[475],{"type":13,"tag":238,"props":476,"children":477},{},[478],{"type":29,"value":479},"Quick start",{"type":13,"tag":14,"props":481,"children":482},{},[483],{"type":29,"value":484},"SQL Editor 탭에서는 몇 가지 예제를 제공하고 있다.",{"type":13,"tag":14,"props":486,"children":487},{},[488],{"type":29,"value":489},"아래 예제는 Supabase에서 만들어 둔 Todo list 앱 개발을 위한 테이블이다. 테이블 읽기/쓰기 정책을 SQL로 설정할 수 있다.",{"type":13,"tag":195,"props":491,"children":495},{"className":492,"code":494,"language":456,"meta":5},[493],"language-sql","--\n-- For use with https://github.com/supabase/supabase/tree/master/examples/todo-next-js\n--\n\ncreate table todos (\n  id bigint generated by default as identity primary key,\n  user_id uuid references auth.users not null,\n  task text check (char_length(task) > 3),\n  is_complete boolean default false,\n  inserted_at timestamp with time zone default timezone('utc'::text, now()) not null\n);\n\nalter table todos enable row level security;\n\ncreate policy \"Individuals can create todos.\" on todos for\n    insert with check (auth.uid() = user_id);\n\ncreate policy \"Individuals can view their own todos. \" on todos for\n    select using (auth.uid() = user_id);\n\ncreate policy \"Individuals can update their own todos.\" on todos for\n    update using (auth.uid() = user_id);\n\ncreate policy \"Individuals can delete their own todos.\" on todos for\n    delete using (auth.uid() = user_id);\n",[496],{"type":13,"tag":203,"props":497,"children":498},{},[499],{"type":13,"tag":195,"props":500,"children":501},{"__ignoreMap":5},[502],{"type":29,"value":494},{"type":13,"tag":70,"props":504,"children":506},{"id":505},"마무리",[507],{"type":29,"value":505},{"type":13,"tag":14,"props":509,"children":510},{},[511],{"type":29,"value":512},"Supabase는 런칭 후 9달 동안 약 3,000개 가량의 데이터베이스가 만들어졌다고 한다. 그리고 현재 YC와 Mozila에게 총 약 60억의 시드 투자를 받았다.",{"type":13,"tag":14,"props":514,"children":515},{},[516],{"type":29,"value":517},"직접 간단하게 훑어봤는데 아직은 기업에서 쓰긴 기능들이 약하지만, 10GB 용량이 무료로 제공되고 인터페이스가 간단하기 때문에 Firebase 대신에 공부나 토이 프로젝트로 쓰기는 좋을 것 같다.",{"type":13,"tag":14,"props":519,"children":520},{},[521],{"type":29,"value":522},"곧 Storage와 Function 기능을 출시할 예정이라고 한다. 앞으로 더 많은 기능이 제공된다면 정말 강력한 툴이 될 것 같다.",{"type":13,"tag":189,"props":524,"children":526},{"id":525},"참고",[527],{"type":29,"value":525},{"type":13,"tag":529,"props":530,"children":531},"ul",{},[532,541],{"type":13,"tag":533,"props":534,"children":535},"li",{},[536],{"type":13,"tag":18,"props":537,"children":539},{"href":20,"rel":538},[22],[540],{"type":29,"value":20},{"type":13,"tag":533,"props":542,"children":543},{},[544],{"type":13,"tag":18,"props":545,"children":548},{"href":546,"rel":547},"https://github.com/supabase/supabase",[22],[549],{"type":29,"value":546},{"title":5,"searchDepth":551,"depth":551,"links":552},2,[553,554,555,560,561,562,563],{"id":72,"depth":551,"text":75},{"id":127,"depth":551,"text":130},{"id":162,"depth":551,"text":165,"children":556},[557,559],{"id":191,"depth":558,"text":191},3,{"id":212,"depth":558,"text":212},{"id":307,"depth":551,"text":310},{"id":335,"depth":551,"text":338},{"id":456,"depth":551,"text":459},{"id":505,"depth":551,"text":505,"children":564},[565],{"id":525,"depth":558,"text":525},"markdown","content:supasbase-overview.md","content","supasbase-overview.md","md",1691494669437]